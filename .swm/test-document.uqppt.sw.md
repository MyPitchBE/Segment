---
id: uqppt
name: Test document
file_version: 1.0.2
app_version: 0.9.6-1
file_blobs:
  src/SegmentServiceProvider.php: 867b05010608f5c8c570b361c1b43a4188424c5e
---

Will initialise the segment library with the proper write key if available.  
Will setup the queue.
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ src/SegmentServiceProvider.php
```hack
â¬œ 30          *
â¬œ 31          * @return void
â¬œ 32          */
ðŸŸ© 33         public function boot()
ðŸŸ© 34         {
ðŸŸ© 35             $this->setupConfig();
ðŸŸ© 36     
ðŸŸ© 37             if ($writeKey = $this->app->config->get('segment.write_key')) {
ðŸŸ© 38                 Segment::init($writeKey, (array) $this->app->config->get('segment.init_options'));
ðŸŸ© 39             }
ðŸŸ© 40     
ðŸŸ© 41             $this->setupQueue();
ðŸŸ© 42         }
â¬œ 43     
â¬œ 44         /**
â¬œ 45          * Setup the config.
```

<br/>

Sets up default configuration based on the `ðŸ“„ config/segment.php` config file.  
Merges into the default configuration
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ src/SegmentServiceProvider.php
```hack
â¬œ 46          *
â¬œ 47          * @return void
â¬œ 48          */
ðŸŸ© 49         protected function setupConfig()
ðŸŸ© 50         {
ðŸŸ© 51             $source = realpath($raw = __DIR__.'/../config/segment.php') ?: $raw;
ðŸŸ© 52     
ðŸŸ© 53             if ($this->app instanceof LaravelApplication && $this->app->runningInConsole()) {
ðŸŸ© 54                 $this->publishes([$source => config_path('segment.php')]);
ðŸŸ© 55             } elseif ($this->app instanceof LumenApplication) {
ðŸŸ© 56                 $this->app->configure('segment');
ðŸŸ© 57             }
ðŸŸ© 58     
ðŸŸ© 59             $this->mergeConfigFrom($source, 'segment');
ðŸŸ© 60         }
â¬œ 61     
â¬œ 62         /**
â¬œ 63          * Setup the queue.
```

<br/>

This file was generated by Swimm. [Click here to view it in the app](https://app.swimm.io/repos/Z2l0aHViJTNBJTNBU2VnbWVudCUzQSUzQU15UGl0Y2hCRQ==/docs/uqppt).